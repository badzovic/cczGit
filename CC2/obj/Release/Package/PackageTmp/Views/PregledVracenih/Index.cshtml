@model CC2.Models.PregledVracenih

@{
    ViewBag.Title = "Index";
}


@{
    ViewBag.Title = "Pregled";
}


<main class="main-content position-relative border-radius-lg ">
    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <div class="card">

                    <!-- Card header -->
                    <div class="card-header">
                        <h5 class="mb-0">Pregled vracenih karti</h5>

                    </div>
                    @if (TempData["Success"] != null)
                    {
                        <div style="margin-left:23px;" id="successPopup" class="custom-popup">
                            <span style="color:green;" class="custom-popup-content">@TempData["Success"]</span>


                        </div>
                    }
                    @if (TempData["Error"] != null)
                    {
                        <div style="margin-left:23px;" id="errorPopup" class="custom-popup">
                            <span style="color:darkred;" class="custom-popup-content">@TempData["Error"]</span>


                        </div>
                    }
                    <div class="table-responsive">

                        <table class="table table-flush" id="datatable-basic">

                            <thead class="thead-light">

                                <tr style="text-align:center;">

                                    <th>Broj</th>

                                    <th>Ime</th>

                                    <th>Prezime</th>

                                    <th>Adresa</th>

                                    <th>PLZ</th>

                                    <th>Drzava</th>

                                    <th>Kreirao</th>

                                    <th>Broj</th>

                                    <th>Pregledaj</th>

                                    <th>Akcija</th>
                                </tr>

                            </thead>

                            @if (User.IsInRole("marketing"))
                            {
                                <tbody>
                                    @foreach (var item in Model.vraceniKontaktiMarketing)
                                    {
                                        <tr>
                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.ID</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.IME</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.PREZIME</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.ADRESA</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.PLZ</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.DRZAVA</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.AspNetUsers.UserName</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.PREFIX @item.BROJ</td>

                                            <td>
                                                <a class="btn btn_primary text-uppercase" href="@Url.Action("Kontakt", "Pregled", new { id = item.ID})">PREGLED</a>
                                            </td>

                                            <td>
                                                <a class="btn btn_primary text-uppercase" href="#" onclick="return confirmAction(@item.ID)">PROSLJEDI ADMINU</a>
                                            </td>

                                        </tr>

                                    }
                                </tbody>
                            }
                            @if (User.IsInRole("adminmarketing"))
                            {
                                <tbody>
                                    @foreach (var item in Model.vraceniKontaktiMarketing)
                                    {
                                        <tr>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.ID</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.IME</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.PREZIME</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.ADRESA</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.PLZ</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.DRZAVA</td>

                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.AspNetUsers.UserName</td>


                                            <td style="text-align:left;" class="text-sm font-weight-normal">@item.PREFIX @item.BROJ</td>

                                            <td>
                                                <a class="btn btn_primary text-uppercase" href="@Url.Action("Kontakt", "Pregled", new { id = item.ID})">PREGLED</a>
                                            </td>
                                            <td>
                                                <a class="btn btn_primary text-uppercase" href="#" onclick="return confirmActionKontrola(@item.ID)">PROSLJEDI KONTROLI</a>
                                            </td>
                                            <td>
                                                <a class="btn btn_primary text-uppercase" href="#" onclick="return confirmVratiAgentu(@item.ID)">VRATI AGENTU</a>
                                            </td>
                                        </tr>

                                    }
                                </tbody>
                            }

                        </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="~/Content/js/plugins/datatables.js"></script>



<script>

    const dataTableBasic = new simpleDatatables.DataTable("#datatable-basic", {

        searchable: true,

    });

    var win = navigator.platform.indexOf('Win') > -1;

    if (win && document.querySelector('#sidenav-scrollbar')) {

        var options = {

            damping: '0.5'

        }

        Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);

    }

</script>

<script>
    function confirmAction(itemId) {

        var confirmResult = confirm("Jeste li sigurni?");

        if (confirmResult) {
            // If the user clicks "OK", continue to the action
            window.location.href = "@Url.Action("Prosljedi", "PregledVracenih")" + "?id=" + itemId;
        }

        // Return false to prevent the default link behavior
        return false;
    }
</script>
<script>
    function confirmActionKontrola(itemId) {

        var confirmResult = confirm("Jeste li sigurni?");

        if (confirmResult) {
            // If the user clicks "OK", continue to the action
            window.location.href = "@Url.Action("ProsljediKontroli", "PregledVracenih")" + "?id=" + itemId;
        }

        // Return false to prevent the default link behavior
        return false;
    }
</script>
<script>
    function confirmVratiAgentu(itemId) {

        var confirmResult = confirm("Jeste li sigurni?");

        if (confirmResult) {
            // If the user clicks "OK", continue to the action
            window.location.href = "@Url.Action("VratiAgentu", "PregledVracenih")" + "?id=" + itemId;
        }

        // Return false to prevent the default link behavior
        return false;
    }
</script>
<script>
    function confirmVratiMarketingu(itemId) {

        var confirmResult = confirm("Jeste li sigurni?");

        if (confirmResult) {
            // If the user clicks "OK", continue to the action
            window.location.href = "@Url.Action("VratiMarketingu", "PregledVracenih")" + "?id=" + itemId;
        }

        // Return false to prevent the default link behavior
        return false;
    }
</script>
<script>
    function confirmProsljediProdaji(itemId) {

        var confirmResult = confirm("Jeste li sigurni?");

        if (confirmResult) {
            // If the user clicks "OK", continue to the action
            window.location.href = "@Url.Action("ProsljediProdaji", "PregledVracenih")" + "?id=" + itemId;
        }

        // Return false to prevent the default link behavior
        return false;
    }
</script>


